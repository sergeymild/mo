{"code":"import { $mobx, warnAboutProxyRequirement, assertProxies, die, isStringish, globalState, asObservableObject } from \"../internal\";\r\nfunction getAdm(target) {\r\n    return target[$mobx];\r\n}\r\n// Optimization: we don't need the intermediate objects and could have a completely custom administration for DynamicObjects,\r\n// and skip either the internal values map, or the base object with its property descriptors!\r\nconst objectProxyTraps = {\r\n    has(target, name) {\r\n        if (__DEV__ && globalState.trackingDerivation)\r\n            warnAboutProxyRequirement(\"detect new properties using the 'in' operator. Use 'has' from 'mobx' instead.\");\r\n        return getAdm(target).has_(name);\r\n    },\r\n    get(target, name) {\r\n        return getAdm(target).get_(name);\r\n    },\r\n    set(target, name, value) {\r\n        if (!isStringish(name))\r\n            return false;\r\n        if (__DEV__ && !getAdm(target).values_.has(name)) {\r\n            warnAboutProxyRequirement(\"add a new observable property through direct assignment. Use 'set' from 'mobx' instead.\");\r\n        }\r\n        // null (intercepted) -> true (success)\r\n        return getAdm(target).set_(name, value, true) ?? true;\r\n    },\r\n    deleteProperty(target, name) {\r\n        if (__DEV__) {\r\n            warnAboutProxyRequirement(\"delete properties from an observable object. Use 'remove' from 'mobx' instead.\");\r\n        }\r\n        if (!isStringish(name))\r\n            return false;\r\n        // null (intercepted) -> true (success)\r\n        return getAdm(target).delete_(name, true) ?? true;\r\n    },\r\n    defineProperty(target, name, descriptor) {\r\n        if (__DEV__) {\r\n            warnAboutProxyRequirement(\"define property on an observable object. Use 'defineProperty' from 'mobx' instead.\");\r\n        }\r\n        // null (intercepted) -> true (success)\r\n        return getAdm(target).defineProperty_(name, descriptor) ?? true;\r\n    },\r\n    ownKeys(target) {\r\n        if (__DEV__ && globalState.trackingDerivation)\r\n            warnAboutProxyRequirement(\"iterate keys to detect added / removed properties. Use `keys` from 'mobx' instead.\");\r\n        return getAdm(target).ownKeys_();\r\n    },\r\n    preventExtensions(target) {\r\n        die(13);\r\n    }\r\n};\r\nexport function asDynamicObservableObject(target, options) {\r\n    assertProxies();\r\n    target = asObservableObject(target, options);\r\n    return (target[$mobx].proxy_ ??= new Proxy(target, objectProxyTraps));\r\n}\r\n//# sourceMappingURL=dynamicobject.js.map","references":["/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/internal.ts"],"map":"{\"version\":3,\"file\":\"dynamicobject.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/types/dynamicobject.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EACH,KAAK,EAGL,yBAAyB,EACzB,aAAa,EACb,GAAG,EACH,WAAW,EACX,WAAW,EAEX,kBAAkB,EACrB,MAAM,aAAa,CAAA;AAEpB,SAAS,MAAM,CAAC,MAAM;IAClB,OAAO,MAAM,CAAC,KAAK,CAAC,CAAA;AACxB,CAAC;AAED,6HAA6H;AAC7H,6FAA6F;AAC7F,MAAM,gBAAgB,GAAsB;IACxC,GAAG,CAAC,MAA2B,EAAE,IAAiB;QAC9C,IAAI,OAAO,IAAI,WAAW,CAAC,kBAAkB;YACzC,yBAAyB,CACrB,+EAA+E,CAClF,CAAA;QACL,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IACpC,CAAC;IACD,GAAG,CAAC,MAA2B,EAAE,IAAiB;QAC9C,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IACpC,CAAC;IACD,GAAG,CAAC,MAA2B,EAAE,IAAiB,EAAE,KAAU;QAC1D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,CAAA;QACpC,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC9C,yBAAyB,CACrB,yFAAyF,CAC5F,CAAA;SACJ;QACD,uCAAuC;QACvC,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,IAAI,CAAA;IACzD,CAAC;IACD,cAAc,CAAC,MAA2B,EAAE,IAAiB;QACzD,IAAI,OAAO,EAAE;YACT,yBAAyB,CACrB,gFAAgF,CACnF,CAAA;SACJ;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,CAAA;QACpC,uCAAuC;QACvC,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,CAAA;IACrD,CAAC;IACD,cAAc,CACV,MAA2B,EAC3B,IAAiB,EACjB,UAA8B;QAE9B,IAAI,OAAO,EAAE;YACT,yBAAyB,CACrB,oFAAoF,CACvF,CAAA;SACJ;QACD,uCAAuC;QACvC,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,IAAI,CAAA;IACnE,CAAC;IACD,OAAO,CAAC,MAA2B;QAC/B,IAAI,OAAO,IAAI,WAAW,CAAC,kBAAkB;YACzC,yBAAyB,CACrB,oFAAoF,CACvF,CAAA;QACL,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAA;IACpC,CAAC;IACD,iBAAiB,CAAC,MAAM;QACpB,GAAG,CAAC,EAAE,CAAC,CAAA;IACX,CAAC;CACJ,CAAA;AAED,MAAM,UAAU,yBAAyB,CACrC,MAAW,EACX,OAAiC;IAEjC,aAAa,EAAE,CAAA;IACf,MAAM,GAAG,kBAAkB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;IAC5C,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,MAAM,KAAK,IAAI,KAAK,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC,CAAA;AACzE,CAAC\"}"}
