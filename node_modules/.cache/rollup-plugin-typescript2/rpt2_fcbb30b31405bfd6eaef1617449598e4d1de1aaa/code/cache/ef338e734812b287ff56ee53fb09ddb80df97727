{"code":"import { globalState, once } from \"../internal\";\r\nexport function isSpyEnabled() {\r\n    return __DEV__ && !!globalState.spyListeners.length;\r\n}\r\nexport function spyReport(event) {\r\n    if (!__DEV__)\r\n        return; // dead code elimination can do the rest\r\n    if (!globalState.spyListeners.length)\r\n        return;\r\n    const listeners = globalState.spyListeners;\r\n    for (let i = 0, l = listeners.length; i < l; i++)\r\n        listeners[i](event);\r\n}\r\nexport function spyReportStart(event) {\r\n    if (!__DEV__)\r\n        return;\r\n    const change = { ...event, spyReportStart: true };\r\n    spyReport(change);\r\n}\r\nconst END_EVENT = { type: \"report-end\", spyReportEnd: true };\r\nexport function spyReportEnd(change) {\r\n    if (!__DEV__)\r\n        return;\r\n    if (change)\r\n        spyReport({ ...change, type: \"report-end\", spyReportEnd: true });\r\n    else\r\n        spyReport(END_EVENT);\r\n}\r\nexport function spy(listener) {\r\n    if (!__DEV__) {\r\n        console.warn(`[mobx.spy] Is a no-op in production builds`);\r\n        return function () { };\r\n    }\r\n    else {\r\n        globalState.spyListeners.push(listener);\r\n        return once(() => {\r\n            globalState.spyListeners = globalState.spyListeners.filter(l => l !== listener);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=spy.js.map","references":["/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/core/computedvalue.ts","/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/types/observablevalue.ts","/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/types/observableobject.ts","/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/types/observablearray.ts","/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/internal.ts"],"map":"{\"version\":3,\"file\":\"spy.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/core/spy.ts\"],\"names\":[],\"mappings\":\"AAIA,OAAO,EAAU,WAAW,EAAE,IAAI,EAAgC,MAAM,aAAa,CAAA;AAErF,MAAM,UAAU,YAAY;IACxB,OAAO,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,MAAM,CAAA;AACvD,CAAC;AAkBD,MAAM,UAAU,SAAS,CAAC,KAAe;IACrC,IAAI,CAAC,OAAO;QAAE,OAAM,CAAC,wCAAwC;IAC7D,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,MAAM;QAAE,OAAM;IAC5C,MAAM,SAAS,GAAG,WAAW,CAAC,YAAY,CAAA;IAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;QAAE,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAA;AACzE,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,KAAmB;IAC9C,IAAI,CAAC,OAAO;QAAE,OAAM;IACpB,MAAM,MAAM,GAAG,EAAE,GAAG,KAAK,EAAE,cAAc,EAAE,IAAa,EAAE,CAAA;IAC1D,SAAS,CAAC,MAAM,CAAC,CAAA;AACrB,CAAC;AAED,MAAM,SAAS,GAAa,EAAE,IAAI,EAAE,YAAY,EAAE,YAAY,EAAE,IAAI,EAAE,CAAA;AAEtE,MAAM,UAAU,YAAY,CAAC,MAA0B;IACnD,IAAI,CAAC,OAAO;QAAE,OAAM;IACpB,IAAI,MAAM;QAAE,SAAS,CAAC,EAAE,GAAG,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAA;;QACvE,SAAS,CAAC,SAAS,CAAC,CAAA;AAC7B,CAAC;AAED,MAAM,UAAU,GAAG,CAAC,QAAoC;IACpD,IAAI,CAAC,OAAO,EAAE;QACV,OAAO,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAA;QAC1D,OAAO,cAAa,CAAC,CAAA;KACxB;SAAM;QACH,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACvC,OAAO,IAAI,CAAC,GAAG,EAAE;YACb,WAAW,CAAC,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAA;QACnF,CAAC,CAAC,CAAA;KACL;AACL,CAAC\"}"}
