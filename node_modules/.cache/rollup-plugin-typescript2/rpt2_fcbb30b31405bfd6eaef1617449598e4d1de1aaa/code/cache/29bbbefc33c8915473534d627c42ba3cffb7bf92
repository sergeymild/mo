{"code":"import { createAction, executeAction, storeAnnotation, die, isFunction, isStringish, createDecoratorAnnotation, createActionAnnotation } from \"../internal\";\r\nexport const ACTION = \"action\";\r\nexport const ACTION_BOUND = \"action.bound\";\r\nexport const AUTOACTION = \"autoAction\";\r\nexport const AUTOACTION_BOUND = \"autoAction.bound\";\r\nconst DEFAULT_ACTION_NAME = \"<unnamed action>\";\r\nconst actionAnnotation = createActionAnnotation(ACTION);\r\nconst actionBoundAnnotation = createActionAnnotation(ACTION_BOUND, {\r\n    bound: true\r\n});\r\nconst autoActionAnnotation = createActionAnnotation(AUTOACTION, {\r\n    autoAction: true\r\n});\r\nconst autoActionBoundAnnotation = createActionAnnotation(AUTOACTION_BOUND, {\r\n    autoAction: true,\r\n    bound: true\r\n});\r\nfunction createActionFactory(autoAction) {\r\n    const res = function action(arg1, arg2) {\r\n        // action(fn() {})\r\n        if (isFunction(arg1))\r\n            return createAction(arg1.name || DEFAULT_ACTION_NAME, arg1, autoAction);\r\n        // action(\"name\", fn() {})\r\n        if (isFunction(arg2))\r\n            return createAction(arg1, arg2, autoAction);\r\n        // @action\r\n        if (isStringish(arg2)) {\r\n            return storeAnnotation(arg1, arg2, autoAction ? autoActionAnnotation : actionAnnotation);\r\n        }\r\n        // action(\"name\") & @action(\"name\")\r\n        if (isStringish(arg1)) {\r\n            return createDecoratorAnnotation(createActionAnnotation(autoAction ? AUTOACTION : ACTION, {\r\n                name: arg1,\r\n                autoAction\r\n            }));\r\n        }\r\n        if (__DEV__)\r\n            die(\"Invalid arguments for `action`\");\r\n    };\r\n    return res;\r\n}\r\nexport const action = createActionFactory(false);\r\nObject.assign(action, actionAnnotation);\r\nexport const autoAction = createActionFactory(true);\r\nObject.assign(autoAction, autoActionAnnotation);\r\naction.bound = createDecoratorAnnotation(actionBoundAnnotation);\r\nautoAction.bound = createDecoratorAnnotation(autoActionBoundAnnotation);\r\nexport function runInAction(fn) {\r\n    return executeAction(fn.name || DEFAULT_ACTION_NAME, false, fn, this, undefined);\r\n}\r\nexport function isAction(thing) {\r\n    return isFunction(thing) && thing.isMobxAction === true;\r\n}\r\n//# sourceMappingURL=action.js.map","references":["/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/internal.ts"],"map":"{\"version\":3,\"file\":\"action.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/api/action.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EACH,YAAY,EACZ,aAAa,EAEb,eAAe,EACf,GAAG,EACH,UAAU,EACV,WAAW,EACX,yBAAyB,EACzB,sBAAsB,EACzB,MAAM,aAAa,CAAA;AAEpB,MAAM,CAAC,MAAM,MAAM,GAAG,QAAQ,CAAA;AAC9B,MAAM,CAAC,MAAM,YAAY,GAAG,cAAc,CAAA;AAC1C,MAAM,CAAC,MAAM,UAAU,GAAG,YAAY,CAAA;AACtC,MAAM,CAAC,MAAM,gBAAgB,GAAG,kBAAkB,CAAA;AAElD,MAAM,mBAAmB,GAAG,kBAAkB,CAAA;AAE9C,MAAM,gBAAgB,GAAG,sBAAsB,CAAC,MAAM,CAAC,CAAA;AACvD,MAAM,qBAAqB,GAAG,sBAAsB,CAAC,YAAY,EAAE;IAC/D,KAAK,EAAE,IAAI;CACd,CAAC,CAAA;AACF,MAAM,oBAAoB,GAAG,sBAAsB,CAAC,UAAU,EAAE;IAC5D,UAAU,EAAE,IAAI;CACnB,CAAC,CAAA;AACF,MAAM,yBAAyB,GAAG,sBAAsB,CAAC,gBAAgB,EAAE;IACvE,UAAU,EAAE,IAAI;IAChB,KAAK,EAAE,IAAI;CACd,CAAC,CAAA;AAeF,SAAS,mBAAmB,CAAC,UAAmB;IAC5C,MAAM,GAAG,GAAmB,SAAS,MAAM,CAAC,IAAI,EAAE,IAAK;QACnD,kBAAkB;QAClB,IAAI,UAAU,CAAC,IAAI,CAAC;YAChB,OAAO,YAAY,CAAC,IAAI,CAAC,IAAI,IAAI,mBAAmB,EAAE,IAAI,EAAE,UAAU,CAAC,CAAA;QAC3E,0BAA0B;QAC1B,IAAI,UAAU,CAAC,IAAI,CAAC;YAAE,OAAO,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,UAAU,CAAC,CAAA;QACjE,UAAU;QACV,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;YACnB,OAAO,eAAe,CAAC,IAAI,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAA;SAC3F;QACD,mCAAmC;QACnC,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;YACnB,OAAO,yBAAyB,CAC5B,sBAAsB,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,EAAE;gBACrD,IAAI,EAAE,IAAI;gBACV,UAAU;aACb,CAAC,CACL,CAAA;SACJ;QAED,IAAI,OAAO;YAAE,GAAG,CAAC,gCAAgC,CAAC,CAAA;IACtD,CAAmB,CAAA;IACnB,OAAO,GAAG,CAAA;AACd,CAAC;AAED,MAAM,CAAC,MAAM,MAAM,GAAmB,mBAAmB,CAAC,KAAK,CAAC,CAAA;AAChE,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAA;AACvC,MAAM,CAAC,MAAM,UAAU,GAAmB,mBAAmB,CAAC,IAAI,CAAC,CAAA;AACnE,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,oBAAoB,CAAC,CAAA;AAE/C,MAAM,CAAC,KAAK,GAAG,yBAAyB,CAAC,qBAAqB,CAAC,CAAA;AAC/D,UAAU,CAAC,KAAK,GAAG,yBAAyB,CAAC,yBAAyB,CAAC,CAAA;AAEvE,MAAM,UAAU,WAAW,CAAI,EAAW;IACtC,OAAO,aAAa,CAAC,EAAE,CAAC,IAAI,IAAI,mBAAmB,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,SAAS,CAAC,CAAA;AACpF,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,KAAU;IAC/B,OAAO,UAAU,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,YAAY,KAAK,IAAI,CAAA;AAC3D,CAAC\"}"}
