{"code":"import { keys, isObservable, isObservableArray, isObservableValue, isObservableMap, isObservableSet, getPlainObjectKeys, die } from \"../internal\";\r\nfunction cache(map, key, value) {\r\n    map.set(key, value);\r\n    return value;\r\n}\r\nfunction toJSHelper(source, __alreadySeen) {\r\n    if (source == null ||\r\n        typeof source !== \"object\" ||\r\n        source instanceof Date ||\r\n        !isObservable(source))\r\n        return source;\r\n    if (isObservableValue(source))\r\n        return toJSHelper(source.get(), __alreadySeen);\r\n    if (__alreadySeen.has(source)) {\r\n        return __alreadySeen.get(source);\r\n    }\r\n    if (isObservableArray(source)) {\r\n        const res = cache(__alreadySeen, source, new Array(source.length));\r\n        source.forEach((value, idx) => {\r\n            res[idx] = toJSHelper(value, __alreadySeen);\r\n        });\r\n        return res;\r\n    }\r\n    if (isObservableSet(source)) {\r\n        const res = cache(__alreadySeen, source, new Set());\r\n        source.forEach(value => {\r\n            res.add(toJSHelper(value, __alreadySeen));\r\n        });\r\n        return res;\r\n    }\r\n    if (isObservableMap(source)) {\r\n        const res = cache(__alreadySeen, source, new Map());\r\n        source.forEach((value, key) => {\r\n            res.set(key, toJSHelper(value, __alreadySeen));\r\n        });\r\n        return res;\r\n    }\r\n    else {\r\n        // must be observable object\r\n        keys(source); // make sure keys are observed\r\n        const res = cache(__alreadySeen, source, {});\r\n        getPlainObjectKeys(source).forEach((key) => {\r\n            res[key] = toJSHelper(source[key], __alreadySeen);\r\n        });\r\n        return res;\r\n    }\r\n}\r\n/**\r\n * Basically, a deep clone, so that no reactive property will exist anymore.\r\n */\r\nexport function toJS(source, options) {\r\n    if (__DEV__ && options)\r\n        die(\"toJS no longer supports options\");\r\n    return toJSHelper(source, new Map());\r\n}\r\n//# sourceMappingURL=tojs.js.map","references":["/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/internal.ts"],"map":"{\"version\":3,\"file\":\"tojs.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/api/tojs.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EACH,IAAI,EACJ,YAAY,EACZ,iBAAiB,EACjB,iBAAiB,EACjB,eAAe,EACf,eAAe,EACf,kBAAkB,EAClB,GAAG,EACN,MAAM,aAAa,CAAA;AAEpB,SAAS,KAAK,CAAO,GAAkB,EAAE,GAAM,EAAE,KAAQ;IACrD,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;IACnB,OAAO,KAAK,CAAA;AAChB,CAAC;AAED,SAAS,UAAU,CAAC,MAAM,EAAE,aAA4B;IACpD,IACI,MAAM,IAAI,IAAI;QACd,OAAO,MAAM,KAAK,QAAQ;QAC1B,MAAM,YAAY,IAAI;QACtB,CAAC,YAAY,CAAC,MAAM,CAAC;QAErB,OAAO,MAAM,CAAA;IAEjB,IAAI,iBAAiB,CAAC,MAAM,CAAC;QAAE,OAAO,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,aAAa,CAAC,CAAA;IAC7E,IAAI,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;QAC3B,OAAO,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;KACnC;IACD,IAAI,iBAAiB,CAAC,MAAM,CAAC,EAAE;QAC3B,MAAM,GAAG,GAAG,KAAK,CAAC,aAAa,EAAE,MAAM,EAAE,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAA;QAClE,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;YAC1B,GAAG,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC,KAAK,EAAE,aAAa,CAAC,CAAA;QAC/C,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAA;KACb;IACD,IAAI,eAAe,CAAC,MAAM,CAAC,EAAE;QACzB,MAAM,GAAG,GAAG,KAAK,CAAC,aAAa,EAAE,MAAM,EAAE,IAAI,GAAG,EAAE,CAAC,CAAA;QACnD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACnB,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAA;QAC7C,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAA;KACb;IACD,IAAI,eAAe,CAAC,MAAM,CAAC,EAAE;QACzB,MAAM,GAAG,GAAG,KAAK,CAAC,aAAa,EAAE,MAAM,EAAE,IAAI,GAAG,EAAE,CAAC,CAAA;QACnD,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;YAC1B,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAA;QAClD,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAA;KACb;SAAM;QACH,4BAA4B;QAC5B,IAAI,CAAC,MAAM,CAAC,CAAA,CAAC,8BAA8B;QAC3C,MAAM,GAAG,GAAG,KAAK,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,CAAC,CAAA;QAC5C,kBAAkB,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;YAC5C,GAAG,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,aAAa,CAAC,CAAA;QACrD,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAA;KACb;AACL,CAAC;AAED;;GAEG;AACH,MAAM,UAAU,IAAI,CAAI,MAAS,EAAE,OAAa;IAC5C,IAAI,OAAO,IAAI,OAAO;QAAE,GAAG,CAAC,iCAAiC,CAAC,CAAA;IAC9D,OAAO,UAAU,CAAC,MAAM,EAAE,IAAI,GAAG,EAAE,CAAC,CAAA;AACxC,CAAC\"}","dts":{"name":"/Users/sergeigolishnikov/development/web/mobx/packages/mobx/api/tojs.d.ts","writeByteOrderMark":false,"text":"/**\r\n * Basically, a deep clone, so that no reactive property will exist anymore.\r\n */\r\nexport declare function toJS<T>(source: T, options?: any): T;\r\n"}}
