{"code":"import { getDescriptor, deepEnhancer, die, recordAnnotationApplied, objectPrototype, storedAnnotationsSymbol } from \"../internal\";\r\nexport function createObservableAnnotation(name, options) {\r\n    return {\r\n        annotationType_: name,\r\n        options_: options,\r\n        make_,\r\n        extend_\r\n    };\r\n}\r\nfunction make_(adm, key) {\r\n    let source = adm.target_;\r\n    // Copy props from proto as well, see test:\r\n    // \"decorate should work with Object.create\"\r\n    while (source && source !== objectPrototype) {\r\n        const descriptor = getDescriptor(source, key);\r\n        if (descriptor) {\r\n            assertObservableDescriptor(adm, this, key, descriptor);\r\n            const definePropertyOutcome = adm.defineObservableProperty_(key, descriptor.value, this.options_?.enhancer ?? deepEnhancer);\r\n            if (!definePropertyOutcome) {\r\n                // Intercepted\r\n                return;\r\n            }\r\n            recordAnnotationApplied(adm, this, key);\r\n            return;\r\n        }\r\n        source = Object.getPrototypeOf(source);\r\n    }\r\n    if (!adm.target_[storedAnnotationsSymbol]?.[key]) {\r\n        // Throw on missing key, except for decorators:\r\n        // Decorator annotations are collected from whole prototype chain.\r\n        // When called from super() some props may not exist yet.\r\n        // However we don't have to worry about missing prop,\r\n        // because the decorator must have been applied to something.\r\n        die(1, this.annotationType_, `${adm.name_}.${key.toString()}`);\r\n    }\r\n}\r\nfunction extend_(adm, key, descriptor, proxyTrap) {\r\n    assertObservableDescriptor(adm, this, key, descriptor);\r\n    return adm.defineObservableProperty_(key, descriptor.value, this.options_?.enhancer ?? deepEnhancer, proxyTrap);\r\n}\r\nfunction assertObservableDescriptor(adm, { annotationType_ }, key, descriptor) {\r\n    if (__DEV__ && !(\"value\" in descriptor)) {\r\n        die(`Cannot apply '${annotationType_}' to '${adm.name_}.${key.toString()}':` +\r\n            `\\n'${annotationType_}' cannot be used on getter/setter properties`);\r\n    }\r\n}\r\n//# sourceMappingURL=observableannotation.js.map","references":["/Users/sergeigolishnikov/development/web/mobx/packages/mobx/src/internal.ts"],"map":"{\"version\":3,\"file\":\"observableannotation.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/types/observableannotation.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAEH,aAAa,EACb,YAAY,EACZ,GAAG,EAEH,uBAAuB,EACvB,eAAe,EACf,uBAAuB,EAC1B,MAAM,aAAa,CAAA;AAEpB,MAAM,UAAU,0BAA0B,CAAC,IAAY,EAAE,OAAgB;IACrE,OAAO;QACH,eAAe,EAAE,IAAI;QACrB,QAAQ,EAAE,OAAO;QACjB,KAAK;QACL,OAAO;KACV,CAAA;AACL,CAAC;AAED,SAAS,KAAK,CAAC,GAAmC,EAAE,GAAgB;IAChE,IAAI,MAAM,GAAG,GAAG,CAAC,OAAO,CAAA;IACxB,2CAA2C;IAC3C,4CAA4C;IAC5C,OAAO,MAAM,IAAI,MAAM,KAAK,eAAe,EAAE;QACzC,MAAM,UAAU,GAAG,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;QAC7C,IAAI,UAAU,EAAE;YACZ,0BAA0B,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,UAAU,CAAC,CAAA;YACtD,MAAM,qBAAqB,GAAG,GAAG,CAAC,yBAAyB,CACvD,GAAG,EACH,UAAU,CAAC,KAAK,EAChB,IAAI,CAAC,QAAQ,EAAE,QAAQ,IAAI,YAAY,CAC1C,CAAA;YACD,IAAI,CAAC,qBAAqB,EAAE;gBACxB,cAAc;gBACd,OAAM;aACT;YACD,uBAAuB,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAA;YACvC,OAAM;SACT;QACD,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;KACzC;IACD,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,uBAAuB,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;QAC9C,+CAA+C;QAC/C,kEAAkE;QAClE,yDAAyD;QACzD,qDAAqD;QACrD,6DAA6D;QAC7D,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,eAAe,EAAE,GAAG,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAA;KACjE;AACL,CAAC;AAED,SAAS,OAAO,CACZ,GAAmC,EACnC,GAAgB,EAChB,UAA8B,EAC9B,SAAkB;IAElB,0BAA0B,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,UAAU,CAAC,CAAA;IACtD,OAAO,GAAG,CAAC,yBAAyB,CAChC,GAAG,EACH,UAAU,CAAC,KAAK,EAChB,IAAI,CAAC,QAAQ,EAAE,QAAQ,IAAI,YAAY,EACvC,SAAS,CACZ,CAAA;AACL,CAAC;AAED,SAAS,0BAA0B,CAC/B,GAAmC,EACnC,EAAE,eAAe,EAAc,EAC/B,GAAgB,EAChB,UAA8B;IAE9B,IAAI,OAAO,IAAI,CAAC,CAAC,OAAO,IAAI,UAAU,CAAC,EAAE;QACrC,GAAG,CACC,iBAAiB,eAAe,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,QAAQ,EAAE,IAAI;YACpE,MAAM,eAAe,8CAA8C,CAC1E,CAAA;KACJ;AACL,CAAC\"}","dts":{"name":"/Users/sergeigolishnikov/development/web/mobx/packages/mobx/types/observableannotation.d.ts","writeByteOrderMark":false,"text":"import { Annotation } from \"../internal\";\r\nexport declare function createObservableAnnotation(name: string, options?: object): Annotation;\r\n"}}
